<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/lib/bootstrap-5.1.3-dist/css/bootstrap.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link
      rel="stylesheet"
      href="https://www.w3schools.com/lib/w3-theme-black.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <script src="/lib/bootstrap-5.1.3-dist/js/bootstrap.min.js"></script>
    <script
      src="https://kit.fontawesome.com/e609f8dd22.js"
      crossorigin="anonymous"
    ></script>
    <title>Shovice | Orders</title>
  </head>
  <body>
    <header>
      <div class="header-container" style="display: flex; padding: 0 150px">
        <div class="header-img">
          <a href="/"
            ><img src="/favicon.ico" alt="" width="150px" height="80px"
          /></a>
        </div>
        <div class="header-search">
          <form action="">
            <input
              class="search-bar"
              type="text"
              placeholder="Search for products..."
              name="search"
            />
            <button class="search-btn" type="submit">
              <i class="fa fa-search"></i>
            </button>
          </form>
        </div>
        <div class="header-items" style="display: flex">
          <a href="/api/admin/product" class="cart-btn"
            ><i class="fa-solid fa-circle-plus"></i>
          </a>
          <a class="nav-link b" href="/">Home</a>
          <a class="nav-link b" href="/api/auth/logout">Logout</a>
        </div>

        <p style="margin: 15px 0 0 20px; color: red">
          Welcome <br /><strong style="color: black"
            >Admin</strong
          >
        </p>
        </div>
      </div>
    </header>

    <section>
      <div class="w3-container w3-padding welcome-container" style="background-color: #4e989a;" id="myHeader">
        <div class="w3-center" style="padding: 20px;">
          <h1 class="w3-xxxlarge w3-animate-bottom" style="color: white;">Welcome to Shovice</h1>
        <h4 style="padding-top: 15px; color: white;">Ecommerce website that allows users to buy Electronic products online</h4>
          <div class="w3-padding-32">
              <a href="/api/admin/users-order">
                <button type="button" class="btn btn-outline-light" style="padding: 10px 40px">
                  All Orders
                </button>
              </a>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row">

            <h1 style="font-weight: 600; padding: 50px 0; font-size: 50px;">User Order</h1>

            <section class="user-order" style="text-align: start;">
              <div class="user-order-section1">
                <div class="user-order-title">
                  <h2 style="font-weight: 600;"><%= name %> Details</h2>
                  <p style="color: darkgrey;" >This Order is been created by <%= timeSince %></p>
              </div>
                  <div class="user-order-container" style="display: flex;">
                  <div class="user-order-box" style="width: 60%;">
                  <h3 style="color: #4E989A; font-weight: 600;">General</h3>
                  <div>
                      <label style="color: darkgrey;">Date created</label><br />
                      <p><%= createdAt %></p>
                  </div>
                  <form id="orderForm" action="/api/admin/user-order/<%= orderId %>?_method=PUT" method="POST">
                      <div style="padding: 20px 0; color: darkgrey;">
                          <label for="status">Select type of order status</label><br />
                          <select class="status-select" required id="status" name="status">
                            <option value="<%= status %>" selected>Select status</option>
                            <option value="underway" >Underway</option>
                            <option value="undercharge">Undercharge</option>
                            <option value="charged">Charged</option>
                            <option value="sent">Sent</option>
                          </select>
                        </div>
                  <button class="btn status-btn" type="submit">
                 Edit Order Status
                   </button>
                  </form>
              </div>

      
              <div class="user-order-box" style="width: 40%;">
                  <h3 style="color: #4E989A; font-weight: 600;">User Info</h3>

                  <div>
                      <label style="color: darkgrey;">Username</label><br />
                      <p><%= username %></p>
                  </div>
                  <div>
                      <label style="color: darkgrey;">City</label><br />
                      <p><%= city %></p>
                  </div>
                  <div>
                      <label style="color: darkgrey;">Email Address</label><br />
                      <p><%= email %></p>
                  </div>
              </div>
          </div>
              </div> 

              <hr style="margin: 60px 0;" />

                <div class="user-order-section2"> 
                <div class="user-order-title">
                    <h2 style="font-weight: 600;"><%= name %> Products</h2>
                    <p style="color: darkgrey;" >This Order is been created by <%= timeSince %></p>
                </div>
             <div class="user-order-container">
                <table class="admin-table orders-table" style="width: 100%">
                    <tr>
                      <th style="width: 70%">Products</th>
                      <th style="width: 10%; text-align: center;">Price</th>
                      <th style="width: 10%; text-align: center;">Quantity</th>
                      <th style="width: 10%; text-align: center;">Total</th>
                    </tr>
                     <% orderProducts.forEach(product=> { %>
                    <tr>
                      <td style="display: flex; align-items: center;">
                        <div style="padding-right: 30px;">
                            <img style="width: 80px; height: 100px; border: 1px solid;" src="/img/<%= product[0].category %>.png"/> 
                        </div>
                        <div>
                        <a href="/product/<%=product[0].id%>"
                          ><h2 style="font-weight: 600; color: #2f65d2;"><%= product[0].name %></h2></a
                        >
                        <p style="color: darkgrey;">Category: <%= product[0].category %></p>
                        <p><strong>Brand</strong> <%= product[0].brand %></p>
                    </div>
                      </td>
                      <td style="text-align: center;"><strong><%= product[0].price %></strong></td>
                      <td style="text-align: center;"><strong><%= product[1].quantity %></strong></td>
                      <td style="text-align: center;"><strong><%= product[0].price *  product[1].quantity %></strong></td>
                    </tr>
                    <% }) %>
                  </table>
            </div>
          </div>
              </section>

    </section>

    <footer>
      <div class="container-fluid cont_footer">
        <img
          src="/img/1.png"
          alt=""
          width="137px"
          height="69px"
          class="img_footer"
        />
        <div class="row footer">
          <div class="col-2">
            <h6 class="footer1">
              <b>Company Info</b>
            </h6>
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">About Us</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Carrier</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >We are hiring</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Blog</a></small
              ></small
            >
          </div>
          <div class="col-2">
            <h6 class="footer1">
              <b>Legal</b>
            </h6>
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">About Us</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Carrier</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >We are hiring</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Blog</a></small
              ></small
            >
          </div>
          <div class="col-2">
            <h6 class="footer1">
              <b>Features</b>
            </h6>
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >Busines Marketing</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >User Analytic</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Live Chat</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >Unlimited Support</a
                ></small
              ></small
            >
          </div>
          <div class="col-2">
            <h6 class="footer1">
              <b>Resources</b>
            </h6>
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >IOS & Android</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#"
                  >Watch a Demo</a
                ></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">Customers</a></small
              ></small
            >
            <small
              ><small
                ><a class="nav-link text-black-50" href="#">API</a></small
              ></small
            >
          </div>
          <div class="col-4">
            <h6 class="footer_1">
              <b>Get In Touch</b>
            </h6>
            <small>
              <small>
                <img src="/img/9.png" alt="" class="footer2" />
                <a class="nav-link text-black-50" href="#">(480) 555-0103</a>
              </small>
            </small>
            <small>
              <small>
                <img src="/img/10.png" alt="" class="footer_2" />
                <a class="nav-link text-black-50" href="#"
                  >4517 Washington Ave. Manchester, <br />
                  Kentucky 39495
                </a>
              </small>
            </small>
            <small>
              <small>
                <img src="/img/11.png" alt="" class="footer2" />
                <a class="nav-link text-black-50" href="#"
                  >debra.holt@example.com</a
                >
              </small>
            </small>
          </div>
        </div>
      </div>
      <div class="footer3">
        <b class="footer_3"> Made With Love By Figmaland All Right Reserved </b>
        <div class="footer4">
          <a href="#"><img src="/img/12.png" alt="" class="footer_4" /></a>
          <a href="#"><img src="/img/13.png" alt="" class="footer_4" /></a>
          <a href="#"><img src="/img/14.png" alt="" class="footer_4" /></a>
        </div>
      </div>
    </footer>

    <script>
        document.getElementById("orderForm").addEventListener("submit", function (event) {
          const selectElement = document.getElementById("status");
          if (selectElement.value === "<%= status %>") {
            alert("Please select a different order status before submitting.");
            event.preventDefault(); 
          }
        });
      </script>
  </body>
</html>
